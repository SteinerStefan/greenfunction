//-------------------------------------------------------------------------------------------------------------------------------
//  Projekt : greenfunction
//  file    : visuGreFuc.c
//  Author  : Andreas Linggi, Stefan Steiner
//  Function: Algorithms to visualize green's function
//  Copyright (c) 2014 Andreas Linggi. All rights reserved.
//-------------------------------------------------------------------------------------------------------------------------------

//-------------------------------------------------------------------------------------------------------------------------------
//Includes
//-------------------------------------------------------------------------------------------------------------------------------
#include <stdio.h>
#include "stdlib.h"
#include "visuGreFuc.h"

//-------------------------------------------------------------------------------------------------------------------------------
//printVector
//-------------------------------------------------------------------------------------------------------------------------------
void printVector(float* v,int n) {
    printf("---------------\n");
    int i;
    for (i = 0; i < n; i++) {
        printf("%f \n",v[i]);
    }
    
}
//-------------------------------------------------------------------------------------------------------------------------------
//newVectorFromMatrixSpecial
//-------------------------------------------------------------------------------------------------------------------------------
float* newVectorFromMatrixSpecial(float** F, int step, int n) 
{	
	//Dim muss ungrad sein
    int n2 = n*n;
    float* f = (float *) malloc(sizeof(float) * n2);
    for (int i=0; i<n2; i++) {
        f[i] = 0;
    }
    int incr = n/2+(step-1);
    int decr = n/2-(step-1);
    for (int j=decr; j<=incr; j++) {
        for (int i=decr; i<=incr; i++) {
            f[j*n+i] = F[i][j];
        }
    }
    return f;
}
//-------------------------------------------------------------------------------------------------------------------------------
//newVectorFromMatrixSpecial
//-------------------------------------------------------------------------------------------------------------------------------
float** newMatrixFromVector(float* v, int n) {
    float** M;
    M = malloc(n * sizeof(float*));
    if (NULL == M) {
        printf("not enough free memory!");
    }
    for (int i = 0; i < n; i++) {
        M[i] = malloc(n * sizeof(float*));
        if(NULL == M[i]) {
            printf("not enough free memory!");
        }
    }
    for (int j=0; j<n; j++) {
        for (int i=0; i<n; i++) {
            M[i][j] = v[j*n+i];
        }
    }
    return M;
}
//-------------------------------------------------------------------------------------------------------------------------------
//printMatrix
//-------------------------------------------------------------------------------------------------------------------------------
void printMatrix(float** M, int n) {
    for (int i=0; i<n; i++) {
        printf("%4d: | ",i+1);
        for (int j=0; j<n; j++) {
            printf(" %5.2f ",M[i][j]);
        }
        printf(" |\n");
    }
}
//-------------------------------------------------------------------------------------------------------------------------------
//freeMatrix
//-------------------------------------------------------------------------------------------------------------------------------
void freeMatrix(float ** M, int n) {
    for (int i = 0; i < n; ++i) {
        free(M[i]);
    }
    free(M);
}
//-------------------------------------------------------------------------------------------------------------------------------
//addMatrixElementWise
//-------------------------------------------------------------------------------------------------------------------------------
void addMatrixElementWise(float** A1, float** A2, int n) {
    for (int i=0; i<n; i++) {
        for (int j=0; j<n; j++) {
            A1[i][j] += A2[i][j];
        }
    }
}
//-------------------------------------------------------------------------------------------------------------------------------
//newMatrix
//-------------------------------------------------------------------------------------------------------------------------------
float** newMatrix(int n, float f) {
    float** M;
    M = malloc(n * sizeof(float*));
    if (NULL == M) {
        printf("not enough free memory!");
    }
    for (int i = 0; i < n; i++) {
        M[i] = malloc(n * sizeof(float*));
        if(NULL == M[i]) {
            printf("not enough free memory!");
        }
    }
    for (int i=0; i<n; i++) {
        for (int j=0; j<n; j++) {
            M[i][j] = f;
        }
    }
    return M;
}
//-------------------------------------------------------------------------------------------------------------------------------

